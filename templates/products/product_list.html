{% extends "base.html" %}
{% block content %}

<div class="row">
  <!-- CATEGORY SIDEBAR -->
  <div class="col-md-3 mb-4">
    <h6 class="fw-bold mb-3">Categories</h6>
    <ul class="list-group list-group-flush">

      <a href="{% url 'product_list' %}"
         class="list-group-item {% if not selected_category %}active{% endif %}">
        All
      </a>

      {% for cat in categories %}
        <a href="{% url 'category_filter' cat.slug %}"
           class="list-group-item {% if selected_category == cat %}active{% endif %}">
          {{ cat.name }}
        </a>
      {% endfor %}
    </ul>
  </div>

  <!-- PRODUCT GRID -->
  <div class="col-md-9">
    <div class="row g-4">
      {% for product in products %}
      <div class="col-md-4">
        <div class="card product-card h-100">
          <div class="product-image-wrapper">
            <img src="{{ product.image.url }}" class="card-img-top">
          </div>
          <div class="card-body text-center">
            <h6 class="fw-bold">{{ product.name }}</h6>
            <p class="fw-bold">Rs. {{ product.price }}</p>
            <a href="{% url 'product_detail' product.slug %}"
               class="btn btn-outline-dark btn-sm w-100">
              View
            </a>
          </div>
        </div>
      </div>
      {% empty %}
        <p class="text-muted">No products in this category.</p>
      {% endfor %}
    </div>
  </div>
</div>

{% endblock %}